!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=83)}([function(t,e,n){var r=n(2),i=n(7),o=n(4),s=n(10),a=n(21),u=function(t,e,n){var c,f,h,l,p=t&u.F,d=t&u.G,v=t&u.S,g=t&u.P,m=t&u.B,y=d?r:v?r[e]||(r[e]={}):(r[e]||{}).prototype,w=d?i:i[e]||(i[e]={}),b=w.prototype||(w.prototype={});for(c in d&&(n=e),n)h=((f=!p&&y&&void 0!==y[c])?y:n)[c],l=m&&f?a(h,r):g&&"function"==typeof h?a(Function.call,h):h,y&&s(y,c,h,t&u.U),w[c]!=h&&o(w,c,l),g&&b[c]!=h&&(b[c]=h)};r.core=i,u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},function(t,e,n){var r=n(32)("wks"),i=n(20),o=n(2).Symbol,s="function"==typeof o;(t.exports=function(t){return r[t]||(r[t]=s&&o[t]||(s?o:i)("Symbol."+t))}).store=r},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e,n){t.exports=!n(9)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e,n){var r=n(5),i=n(19);t.exports=n(3)?function(t,e,n){return r.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var r=n(6),i=n(49),o=n(50),s=Object.defineProperty;e.f=n(3)?Object.defineProperty:function(t,e,n){if(r(t),e=o(e,!0),r(n),i)try{return s(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){var r=n(8);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e){var n=t.exports={version:"2.6.1"};"number"==typeof __e&&(__e=n)},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,n){var r=n(2),i=n(4),o=n(13),s=n(20)("src"),a=Function.toString,u=(""+a).split("toString");n(7).inspectSource=function(t){return a.call(t)},(t.exports=function(t,e,n,a){var c="function"==typeof n;c&&(o(n,"name")||i(n,"name",e)),t[e]!==n&&(c&&(o(n,s)||i(n,s,t[e]?""+t[e]:u.join(String(e)))),t===r?t[e]=n:a?t[e]?t[e]=n:i(t,e,n):(delete t[e],i(t,e,n)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[s]||a.call(this)})},function(t,e,n){var r=n(24);t.exports=function(t){return Object(r(t))}},function(t,e){t.exports={}},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var r=n(25),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},function(t,e,n){"use strict";var r=n(9);t.exports=function(t,e){return!!t&&r(function(){e?t.call(null,function(){},1):t.call(null)})}},function(t,e,n){for(var r=n(17),i=n(27),o=n(10),s=n(2),a=n(4),u=n(12),c=n(1),f=c("iterator"),h=c("toStringTag"),l=u.Array,p={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},d=i(p),v=0;v<d.length;v++){var g,m=d[v],y=p[m],w=s[m],b=w&&w.prototype;if(b&&(b[f]||a(b,f,l),b[h]||a(b,h,m),u[m]=l,y))for(g in r)b[g]||o(b,g,r[g],!0)}},function(t,e,n){"use strict";var r=n(35),i=n(54),o=n(12),s=n(26);t.exports=n(36)(Array,"Array",function(t,e){this._t=s(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,i(1)):i(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(t,e,n){"use strict";var r=n(0),i=n(22)(0),o=n(15)([].forEach,!0);r(r.P+r.F*!o,"Array",{forEach:function(t){return i(this,t,arguments[1])}})},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},function(t,e,n){var r=n(30);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},function(t,e,n){var r=n(21),i=n(31),o=n(11),s=n(14),a=n(51);t.exports=function(t,e){var n=1==t,u=2==t,c=3==t,f=4==t,h=6==t,l=5==t||h,p=e||a;return function(e,a,d){for(var v,g,m=o(e),y=i(m),w=r(a,d,3),b=s(y.length),x=0,S=n?p(e,b):u?p(e,0):void 0;b>x;x++)if((l||x in y)&&(g=w(v=y[x],x,m),t))if(n)S[x]=g;else if(g)switch(t){case 3:return!0;case 5:return v;case 6:return x;case 2:S.push(v)}else if(f)return!1;return h?-1:c||f?f:S}}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e,n){var r=n(31),i=n(24);t.exports=function(t){return r(i(t))}},function(t,e,n){var r=n(58),i=n(39);t.exports=Object.keys||function(t){return r(t,i)}},function(t,e,n){var r=n(32)("keys"),i=n(20);t.exports=function(t){return r[t]||(r[t]=i(t))}},function(t,e,n){var r=n(8),i=n(2).document,o=r(i)&&r(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){var r=n(23);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,e,n){var r=n(7),i=n(2),o=i["__core-js_shared__"]||(i["__core-js_shared__"]={});(t.exports=function(t,e){return o[t]||(o[t]=void 0!==e?e:{})})("versions",[]).push({version:r.version,mode:n(33)?"pure":"global",copyright:"Â© 2018 Denis Pushkarev (zloirock.ru)"})},function(t,e){t.exports=!1},function(t,e,n){"use strict";var r=n(0),i=n(22)(2);r(r.P+r.F*!n(15)([].filter,!0),"Array",{filter:function(t){return i(this,t,arguments[1])}})},function(t,e,n){var r=n(1)("unscopables"),i=Array.prototype;null==i[r]&&n(4)(i,r,{}),t.exports=function(t){i[r][t]=!0}},function(t,e,n){"use strict";var r=n(33),i=n(0),o=n(10),s=n(4),a=n(12),u=n(55),c=n(40),f=n(60),h=n(1)("iterator"),l=!([].keys&&"next"in[].keys()),p=function(){return this};t.exports=function(t,e,n,d,v,g,m){u(n,e,d);var y,w,b,x=function(t){if(!l&&t in F)return F[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},S=e+" Iterator",T="values"==v,P=!1,F=t.prototype,_=F[h]||F["@@iterator"]||v&&F[v],k=_||x(v),O=v?T?x("entries"):k:void 0,A="Array"==e&&F.entries||_;if(A&&(b=f(A.call(new t)))!==Object.prototype&&b.next&&(c(b,S,!0),r||"function"==typeof b[h]||s(b,h,p)),T&&_&&"values"!==_.name&&(P=!0,k=function(){return _.call(this)}),r&&!m||!l&&!P&&F[h]||s(F,h,k),a[e]=k,a[S]=p,v)if(y={values:T?k:x("values"),keys:g?k:x("keys"),entries:O},m)for(w in y)w in F||o(F,w,y[w]);else i(i.P+i.F*(l||P),e,y);return y}},function(t,e,n){var r=n(26),i=n(14),o=n(38);t.exports=function(t){return function(e,n,s){var a,u=r(e),c=i(u.length),f=o(s,c);if(t&&n!=n){for(;c>f;)if((a=u[f++])!=a)return!0}else for(;c>f;f++)if((t||f in u)&&u[f]===n)return t||f||0;return!t&&-1}}},function(t,e,n){var r=n(25),i=Math.max,o=Math.min;t.exports=function(t,e){return(t=r(t))<0?i(t+e,0):o(t,e)}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,n){var r=n(5).f,i=n(13),o=n(1)("toStringTag");t.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,o)&&r(t,o,{configurable:!0,value:e})}},function(t,e,n){var r=n(11),i=n(27);n(61)("keys",function(){return function(t){return i(r(t))}})},function(t,e,n){var r=n(0);r(r.S+r.F*!n(3),"Object",{defineProperty:n(5).f})},function(t,e,n){"use strict";var r=n(0),i=n(22)(1);r(r.P+r.F*!n(15)([].map,!0),"Array",{map:function(t){return i(this,t,arguments[1])}})},function(t,e,n){"use strict";n(74);var r=n(6),i=n(45),o=n(3),s=/./.toString,a=function(t){n(10)(RegExp.prototype,"toString",t,!0)};n(9)(function(){return"/a/b"!=s.call({source:"a",flags:"b"})})?a(function(){var t=r(this);return"/".concat(t.source,"/","flags"in t?t.flags:!o&&t instanceof RegExp?i.call(t):void 0)}):"toString"!=s.name&&a(function(){return s.call(this)})},function(t,e,n){"use strict";var r=n(6);t.exports=function(){var t=r(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},function(t,e,n){var r=Date.prototype,i=r.toString,o=r.getTime;new Date(NaN)+""!="Invalid Date"&&n(10)(r,"toString",function(){var t=o.call(this);return t==t?i.call(this):"Invalid Date"})},function(t,e,n){var r;!function(){"use strict";var i=.5*(Math.sqrt(3)-1),o=(3-Math.sqrt(3))/6,s=1/6,a=(Math.sqrt(5)-1)/4,u=(5-Math.sqrt(5))/20;function c(t){var e;e="function"==typeof t?t:t?function(){var t=0,e=0,n=0,r=1,i=(o=4022871197,function(t){t=t.toString();for(var e=0;e<t.length;e++){var n=.02519603282416938*(o+=t.charCodeAt(e));n-=o=n>>>0,o=(n*=o)>>>0,o+=4294967296*(n-=o)}return 2.3283064365386963e-10*(o>>>0)});var o;t=i(" "),e=i(" "),n=i(" ");for(var s=0;s<arguments.length;s++)(t-=i(arguments[s]))<0&&(t+=1),(e-=i(arguments[s]))<0&&(e+=1),(n-=i(arguments[s]))<0&&(n+=1);return i=null,function(){var i=2091639*t+2.3283064365386963e-10*r;return t=e,e=n,n=i-(r=0|i)}}(t):Math.random,this.p=f(e),this.perm=new Uint8Array(512),this.permMod12=new Uint8Array(512);for(var n=0;n<512;n++)this.perm[n]=this.p[255&n],this.permMod12[n]=this.perm[n]%12}function f(t){var e,n=new Uint8Array(256);for(e=0;e<256;e++)n[e]=e;for(e=0;e<255;e++){var r=e+~~(t()*(256-e)),i=n[e];n[e]=n[r],n[r]=i}return n}c.prototype={grad3:new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]),grad4:new Float32Array([0,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,1,0,1,1,1,0,1,-1,1,0,-1,1,1,0,-1,-1,-1,0,1,1,-1,0,1,-1,-1,0,-1,1,-1,0,-1,-1,1,1,0,1,1,1,0,-1,1,-1,0,1,1,-1,0,-1,-1,1,0,1,-1,1,0,-1,-1,-1,0,1,-1,-1,0,-1,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,0]),noise2D:function(t,e){var n,r,s=this.permMod12,a=this.perm,u=this.grad3,c=0,f=0,h=0,l=(t+e)*i,p=Math.floor(t+l),d=Math.floor(e+l),v=(p+d)*o,g=t-(p-v),m=e-(d-v);g>m?(n=1,r=0):(n=0,r=1);var y=g-n+o,w=m-r+o,b=g-1+2*o,x=m-1+2*o,S=255&p,T=255&d,P=.5-g*g-m*m;if(P>=0){var F=3*s[S+a[T]];c=(P*=P)*P*(u[F]*g+u[F+1]*m)}var _=.5-y*y-w*w;if(_>=0){var k=3*s[S+n+a[T+r]];f=(_*=_)*_*(u[k]*y+u[k+1]*w)}var O=.5-b*b-x*x;if(O>=0){var A=3*s[S+1+a[T+1]];h=(O*=O)*O*(u[A]*b+u[A+1]*x)}return 70*(c+f+h)},noise3D:function(t,e,n){var r,i,o,a,u,c,f,h,l,p,d=this.permMod12,v=this.perm,g=this.grad3,m=(t+e+n)*(1/3),y=Math.floor(t+m),w=Math.floor(e+m),b=Math.floor(n+m),x=(y+w+b)*s,S=t-(y-x),T=e-(w-x),P=n-(b-x);S>=T?T>=P?(u=1,c=0,f=0,h=1,l=1,p=0):S>=P?(u=1,c=0,f=0,h=1,l=0,p=1):(u=0,c=0,f=1,h=1,l=0,p=1):T<P?(u=0,c=0,f=1,h=0,l=1,p=1):S<P?(u=0,c=1,f=0,h=0,l=1,p=1):(u=0,c=1,f=0,h=1,l=1,p=0);var F=S-u+s,_=T-c+s,k=P-f+s,O=S-h+2*s,A=T-l+2*s,L=P-p+2*s,M=S-1+.5,E=T-1+.5,j=P-1+.5,C=255&y,B=255&w,D=255&b,I=.6-S*S-T*T-P*P;if(I<0)r=0;else{var R=3*d[C+v[B+v[D]]];r=(I*=I)*I*(g[R]*S+g[R+1]*T+g[R+2]*P)}var U=.6-F*F-_*_-k*k;if(U<0)i=0;else{var W=3*d[C+u+v[B+c+v[D+f]]];i=(U*=U)*U*(g[W]*F+g[W+1]*_+g[W+2]*k)}var N=.6-O*O-A*A-L*L;if(N<0)o=0;else{var z=3*d[C+h+v[B+l+v[D+p]]];o=(N*=N)*N*(g[z]*O+g[z+1]*A+g[z+2]*L)}var G=.6-M*M-E*E-j*j;if(G<0)a=0;else{var q=3*d[C+1+v[B+1+v[D+1]]];a=(G*=G)*G*(g[q]*M+g[q+1]*E+g[q+2]*j)}return 32*(r+i+o+a)},noise4D:function(t,e,n,r){var i,o,s,c,f,h,l,p,d,v,g,m,y,w,b,x,S,T=this.perm,P=this.grad4,F=(t+e+n+r)*a,_=Math.floor(t+F),k=Math.floor(e+F),O=Math.floor(n+F),A=Math.floor(r+F),L=(_+k+O+A)*u,M=t-(_-L),E=e-(k-L),j=n-(O-L),C=r-(A-L),B=0,D=0,I=0,R=0;M>E?B++:D++,M>j?B++:I++,M>C?B++:R++,E>j?D++:I++,E>C?D++:R++,j>C?I++:R++;var U=M-(h=B>=3?1:0)+u,W=E-(l=D>=3?1:0)+u,N=j-(p=I>=3?1:0)+u,z=C-(d=R>=3?1:0)+u,G=M-(v=B>=2?1:0)+2*u,q=E-(g=D>=2?1:0)+2*u,H=j-(m=I>=2?1:0)+2*u,Q=C-(y=R>=2?1:0)+2*u,V=M-(w=B>=1?1:0)+3*u,Z=E-(b=D>=1?1:0)+3*u,Y=j-(x=I>=1?1:0)+3*u,K=C-(S=R>=1?1:0)+3*u,$=M-1+4*u,J=E-1+4*u,X=j-1+4*u,tt=C-1+4*u,et=255&_,nt=255&k,rt=255&O,it=255&A,ot=.6-M*M-E*E-j*j-C*C;if(ot<0)i=0;else{var st=T[et+T[nt+T[rt+T[it]]]]%32*4;i=(ot*=ot)*ot*(P[st]*M+P[st+1]*E+P[st+2]*j+P[st+3]*C)}var at=.6-U*U-W*W-N*N-z*z;if(at<0)o=0;else{var ut=T[et+h+T[nt+l+T[rt+p+T[it+d]]]]%32*4;o=(at*=at)*at*(P[ut]*U+P[ut+1]*W+P[ut+2]*N+P[ut+3]*z)}var ct=.6-G*G-q*q-H*H-Q*Q;if(ct<0)s=0;else{var ft=T[et+v+T[nt+g+T[rt+m+T[it+y]]]]%32*4;s=(ct*=ct)*ct*(P[ft]*G+P[ft+1]*q+P[ft+2]*H+P[ft+3]*Q)}var ht=.6-V*V-Z*Z-Y*Y-K*K;if(ht<0)c=0;else{var lt=T[et+w+T[nt+b+T[rt+x+T[it+S]]]]%32*4;c=(ht*=ht)*ht*(P[lt]*V+P[lt+1]*Z+P[lt+2]*Y+P[lt+3]*K)}var pt=.6-$*$-J*J-X*X-tt*tt;if(pt<0)f=0;else{var dt=T[et+1+T[nt+1+T[rt+1+T[it+1]]]]%32*4;f=(pt*=pt)*pt*(P[dt]*$+P[dt+1]*J+P[dt+2]*X+P[dt+3]*tt)}return 27*(i+o+s+c+f)}},c._buildPermutationTable=f,void 0===(r=function(){return c}.call(e,n,e,t))||(t.exports=r),e.SimplexNoise=c,t.exports=c}()},function(t,e,n){(function(t,r){var i;!function(){if(void 0!==t.exports)var o=n(80),s=n(81),a=n(82);var u={function:!0,object:!0};function c(t){return t&&t.Object===Object?t:null}parseFloat,parseInt;var f=u[typeof e]&&e&&!e.nodeType?e:void 0,h=u[typeof t]&&t&&!t.nodeType?t:void 0,l=(h&&h.exports,c(f&&h&&"object"==typeof r&&r)),p=c(u[typeof self]&&self),d=c(u[typeof window]&&window),v=c(u[typeof this]&&this);l||d!==(v&&v.window)&&d||p||v||Function("return this")();function g(t){return String("0000000"+t).slice(-7)}"gc"in window||(window.gc=function(){}),HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(t,e,n){for(var r=atob(this.toDataURL(e,n).split(",")[1]),i=r.length,o=new Uint8Array(i),s=0;s<i;s++)o[s]=r.charCodeAt(s);t(new Blob([o],{type:e||"image/png"}))}}),
// @license http://opensource.org/licenses/MIT
function(){if("performance"in window==0&&(window.performance={}),Date.now=Date.now||function(){return(new Date).getTime()},"now"in window.performance==0){var t=Date.now();performance.timing&&performance.timing.navigationStart&&(t=performance.timing.navigationStart),window.performance.now=function(){return Date.now()-t}}}();var m=window.Date.now();function y(t){var e={};this.settings=t,this.on=function(t,n){e[t]=n},this.emit=function(t){var n=e[t];n&&n.apply(null,Array.prototype.slice.call(arguments,1))},this.filename=t.name||function(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}(),this.extension="",this.mimeType=""}function w(t){y.call(this,t),this.extension=".tar",this.mimeType="application/x-tar",this.fileExtension="",this.tape=null,this.count=0}function b(t){w.call(this,t),this.type="image/png",this.fileExtension=".png"}function x(t){w.call(this,t),this.type="image/jpeg",this.fileExtension=".jpg",this.quality=t.quality/100||.8}function S(t){"image/webp"!==document.createElement("canvas").toDataURL("image/webp").substr(5,10)&&console.log("WebP not supported - try another export format"),y.call(this,t),this.quality=t.quality/100||.8,this.extension=".webm",this.mimeType="video/webm",this.baseFilename=this.filename,this.frames=[],this.part=1,this.videoWriter=new WebMWriter({quality:this.quality,fileWriter:null,fd:null,frameRate:t.framerate})}function T(t){y.call(this,t),t.quality=t.quality/100||.8,this.encoder=new FFMpegServer.Video(t),this.encoder.on("process",function(){this.emit("process")}.bind(this)),this.encoder.on("finished",function(t,e){var n=this.callback;n&&(this.callback=void 0,n(t,e))}.bind(this)),this.encoder.on("progress",function(t){this.settings.onProgress&&this.settings.onProgress(t)}.bind(this)),this.encoder.on("error",function(t){alert(JSON.stringify(t,null,2))}.bind(this))}function P(t){y.call(this,t),this.framerate=this.settings.framerate,this.type="video/webm",this.extension=".webm",this.stream=null,this.mediaRecorder=null,this.chunks=[]}function F(t){y.call(this,t),t.quality=31-(30*t.quality/100||10),t.workers=t.workers||4,this.extension=".gif",this.mimeType="image/gif",this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.sizeSet=!1,this.encoder=new a({workers:t.workers,quality:t.quality,workerScript:t.workersPath+"gif.worker.js"}),this.encoder.on("progress",function(t){this.settings.onProgress&&this.settings.onProgress(t)}.bind(this)),this.encoder.on("finished",function(t){var e=this.callback;e&&(this.callback=void 0,e(t))}.bind(this))}function _(t){var e,n,r,i,o,a,u,c=t||{},f=(new Date,[]),h=[],l=0,p=0,d=[],v=!1,g={};c.framerate=c.framerate||60,c.motionBlurFrames=2*(c.motionBlurFrames||1),e=c.verbose||!1,c.display,c.step=1e3/c.framerate,c.timeLimit=c.timeLimit||0,c.frameLimit=c.frameLimit||0,c.startTime=c.startTime||0;var y=document.createElement("div");y.style.position="absolute",y.style.left=y.style.top=0,y.style.backgroundColor="black",y.style.fontFamily="monospace",y.style.fontSize="11px",y.style.padding="5px",y.style.color="red",y.style.zIndex=1e5,c.display&&document.body.appendChild(y);var w,_,k=document.createElement("canvas"),O=k.getContext("2d");H("Step is set to "+c.step+"ms");var A={gif:F,webm:S,ffmpegserver:T,png:b,jpg:x,"webm-mediarecorder":P},L=A[c.format];if(!L)throw"Error: Incorrect or missing format: Valid formats are "+Object.keys(A).join(", ");if((u=new L(c)).step=a,u.on("process",G),u.on("progress",function(t){!function(t){var e=g[t];e&&e.apply(null,Array.prototype.slice.call(arguments,1))}("progress",t)}),"performance"in window==0&&(window.performance={}),Date.now=Date.now||function(){return(new Date).getTime()},"now"in window.performance==0){var M=Date.now();performance.timing&&performance.timing.navigationStart&&(M=performance.timing.navigationStart),window.performance.now=function(){return Date.now()-M}}var E=window.setTimeout,j=window.setInterval,C=window.clearInterval,B=window.clearTimeout,D=window.requestAnimationFrame,I=window.Date.now,R=window.performance.now,U=window.Date.prototype.getTime,W=[];function N(){v=!1,u.stop(),H("Capturer stop"),window.setTimeout=E,window.setInterval=j,window.clearInterval=C,window.clearTimeout=B,window.requestAnimationFrame=D,window.Date.prototype.getTime=U,window.Date.now=I,window.performance.now=R}function z(t,e){E(t,0,e)}function a(){z(G)}function G(){var t=1e3/c.framerate,e=(l+p/c.motionBlurFrames)*t;n=r+e,i=o+e,W.forEach(function(t){t._hookedTime=e/1e3}),function(){var t=l/c.framerate;(c.frameLimit&&l>=c.frameLimit||c.timeLimit&&t>=c.timeLimit)&&(N(),q());var e=new Date(null);e.setSeconds(t),c.motionBlurFrames>2?y.textContent="CCapture "+c.format+" | "+l+" frames ("+p+" inter) | "+e.toISOString().substr(11,8):y.textContent="CCapture "+c.format+" | "+l+" frames | "+e.toISOString().substr(11,8)}(),H("Frame: "+l+" "+p);for(var s=0;s<f.length;s++)n>=f[s].triggerTime&&(z(f[s].callback),f.splice(s,1));for(s=0;s<h.length;s++)n>=h[s].triggerTime&&(z(h[s].callback),h[s].triggerTime+=h[s].time);d.forEach(function(t){z(t,n-m)}),d=[]}function q(t){t||(t=function(t){return s(t,u.filename+u.extension,u.mimeType),!1}),u.save(t)}function H(t){e&&console.log(t)}return{start:function(){!function(){function t(){return this._hooked||(this._hooked=!0,this._hookedTime=this.currentTime||0,this.pause(),W.push(this)),this._hookedTime+c.startTime}H("Capturer start"),r=window.Date.now(),n=r+c.startTime,o=window.performance.now(),i=o+c.startTime,window.Date.prototype.getTime=function(){return n},window.Date.now=function(){return n},window.setTimeout=function(t,e){var r={callback:t,time:e,triggerTime:n+e};return f.push(r),H("Timeout set to "+r.time),r},window.clearTimeout=function(t){for(var e=0;e<f.length;e++)f[e]!=t||(f.splice(e,1),H("Timeout cleared"))},window.setInterval=function(t,e){var r={callback:t,time:e,triggerTime:n+e};return h.push(r),H("Interval set to "+r.time),r},window.clearInterval=function(t){return H("clear Interval"),null},window.requestAnimationFrame=function(t){d.push(t)},window.performance.now=function(){return i};try{Object.defineProperty(HTMLVideoElement.prototype,"currentTime",{get:t}),Object.defineProperty(HTMLAudioElement.prototype,"currentTime",{get:t})}catch(t){H(t)}}(),u.start(),v=!0},capture:function(t){v&&(c.motionBlurFrames>2?(function(t){k.width===t.width&&k.height===t.height||(k.width=t.width,k.height=t.height,w=new Uint16Array(k.height*k.width*4),O.fillStyle="#0",O.fillRect(0,0,k.width,k.height))}(t),function(t){O.drawImage(t,0,0),_=O.getImageData(0,0,k.width,k.height);for(var e=0;e<w.length;e+=4)w[e]+=_.data[e],w[e+1]+=_.data[e+1],w[e+2]+=_.data[e+2];p++}(t),p>=.5*c.motionBlurFrames?function(){for(var t=_.data,e=0;e<w.length;e+=4)t[e]=2*w[e]/c.motionBlurFrames,t[e+1]=2*w[e+1]/c.motionBlurFrames,t[e+2]=2*w[e+2]/c.motionBlurFrames;for(O.putImageData(_,0,0),u.add(k),p=0,H("Full MB Frame! "+ ++l+" "+n),e=0;e<w.length;e+=4)w[e]=0,w[e+1]=0,w[e+2]=0;gc()}():a()):(u.add(t),H("Full Frame! "+ ++l)))},stop:N,save:q,on:function(t,e){g[t]=e}}}y.prototype.start=function(){},y.prototype.stop=function(){},y.prototype.add=function(){},y.prototype.save=function(){},y.prototype.dispose=function(){},y.prototype.safeToProceed=function(){return!0},y.prototype.step=function(){console.log("Step not set!")},w.prototype=Object.create(y.prototype),w.prototype.start=function(){this.dispose()},w.prototype.add=function(t){var e=new FileReader;e.onload=function(){this.tape.append(g(this.count)+this.fileExtension,new Uint8Array(e.result)),this.count++,this.step()}.bind(this),e.readAsArrayBuffer(t)},w.prototype.save=function(t){t(this.tape.save())},w.prototype.dispose=function(){this.tape=new o,this.count=0},b.prototype=Object.create(w.prototype),b.prototype.add=function(t){t.toBlob(function(t){w.prototype.add.call(this,t)}.bind(this),this.type)},x.prototype=Object.create(w.prototype),x.prototype.add=function(t){t.toBlob(function(t){w.prototype.add.call(this,t)}.bind(this),this.type,this.quality)},S.prototype=Object.create(y.prototype),S.prototype.start=function(t){this.dispose()},S.prototype.add=function(t){this.videoWriter.addFrame(t),this.settings.autoSaveTime>0&&this.frames.length/this.settings.framerate>=this.settings.autoSaveTime?this.save(function(t){this.filename=this.baseFilename+"-part-"+g(this.part),s(t,this.filename+this.extension,this.mimeType),this.dispose(),this.part++,this.filename=this.baseFilename+"-part-"+g(this.part),this.step()}.bind(this)):this.step()},S.prototype.save=function(t){this.videoWriter.complete().then(t)},S.prototype.dispose=function(t){this.frames=[]},T.prototype=Object.create(y.prototype),T.prototype.start=function(){this.encoder.start(this.settings)},T.prototype.add=function(t){this.encoder.add(t)},T.prototype.save=function(t){this.callback=t,this.encoder.end()},T.prototype.safeToProceed=function(){return this.encoder.safeToProceed()},P.prototype=Object.create(y.prototype),P.prototype.add=function(t){this.stream||(this.stream=t.captureStream(this.framerate),this.mediaRecorder=new MediaRecorder(this.stream),this.mediaRecorder.start(),this.mediaRecorder.ondataavailable=function(t){this.chunks.push(t.data)}.bind(this)),this.step()},P.prototype.save=function(t){this.mediaRecorder.onstop=function(e){var n=new Blob(this.chunks,{type:"video/webm"});this.chunks=[],t(n)}.bind(this),this.mediaRecorder.stop()},F.prototype=Object.create(y.prototype),F.prototype.add=function(t){this.sizeSet||(this.encoder.setOption("width",t.width),this.encoder.setOption("height",t.height),this.sizeSet=!0),this.canvas.width=t.width,this.canvas.height=t.height,this.ctx.drawImage(t,0,0),this.encoder.addFrame(this.ctx,{copy:!0,delay:this.settings.step}),this.step()},F.prototype.save=function(t){this.callback=t,this.encoder.render()},(d||p||{}).CCapture=_,void 0===(i=function(){return _}.call(e,n,e,t))||(t.exports=i)}()}).call(this,n(78)(t),n(79))},function(t,e,n){t.exports=!n(3)&&!n(9)(function(){return 7!=Object.defineProperty(n(29)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){var r=n(8);t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){var r=n(52);t.exports=function(t,e){return new(r(t))(e)}},function(t,e,n){var r=n(8),i=n(53),o=n(1)("species");t.exports=function(t){var e;return i(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!i(e.prototype)||(e=void 0),r(e)&&null===(e=e[o])&&(e=void 0)),void 0===e?Array:e}},function(t,e,n){var r=n(23);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){"use strict";var r=n(56),i=n(19),o=n(40),s={};n(4)(s,n(1)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=r(s,{next:i(1,n)}),o(t,e+" Iterator")}},function(t,e,n){var r=n(6),i=n(57),o=n(39),s=n(28)("IE_PROTO"),a=function(){},u=function(){var t,e=n(29)("iframe"),r=o.length;for(e.style.display="none",n(59).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),u=t.F;r--;)delete u.prototype[o[r]];return u()};t.exports=Object.create||function(t,e){var n;return null!==t?(a.prototype=r(t),n=new a,a.prototype=null,n[s]=t):n=u(),void 0===e?n:i(n,e)}},function(t,e,n){var r=n(5),i=n(6),o=n(27);t.exports=n(3)?Object.defineProperties:function(t,e){i(t);for(var n,s=o(e),a=s.length,u=0;a>u;)r.f(t,n=s[u++],e[n]);return t}},function(t,e,n){var r=n(13),i=n(26),o=n(37)(!1),s=n(28)("IE_PROTO");t.exports=function(t,e){var n,a=i(t),u=0,c=[];for(n in a)n!=s&&r(a,n)&&c.push(n);for(;e.length>u;)r(a,n=e[u++])&&(~o(c,n)||c.push(n));return c}},function(t,e,n){var r=n(2).document;t.exports=r&&r.documentElement},function(t,e,n){var r=n(13),i=n(11),o=n(28)("IE_PROTO"),s=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),r(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?s:null}},function(t,e,n){var r=n(0),i=n(7),o=n(9);t.exports=function(t,e){var n=(i.Object||{})[t]||Object[t],s={};s[t]=e(n),r(r.S+r.F*o(function(){n(1)}),"Object",s)}},function(t,e,n){"use strict";var r=n(63)(!0);n(36)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e,n){var r=n(25),i=n(24);t.exports=function(t){return function(e,n){var o,s,a=String(i(e)),u=r(n),c=a.length;return u<0||u>=c?t?"":void 0:(o=a.charCodeAt(u))<55296||o>56319||u+1===c||(s=a.charCodeAt(u+1))<56320||s>57343?t?a.charAt(u):o:t?a.slice(u,u+2):s-56320+(o-55296<<10)+65536}}},function(t,e,n){"use strict";var r=n(21),i=n(0),o=n(11),s=n(65),a=n(66),u=n(14),c=n(67),f=n(68);i(i.S+i.F*!n(70)(function(t){Array.from(t)}),"Array",{from:function(t){var e,n,i,h,l=o(t),p="function"==typeof this?this:Array,d=arguments.length,v=d>1?arguments[1]:void 0,g=void 0!==v,m=0,y=f(l);if(g&&(v=r(v,d>2?arguments[2]:void 0,2)),null==y||p==Array&&a(y))for(n=new p(e=u(l.length));e>m;m++)c(n,m,g?v(l[m],m):l[m]);else for(h=y.call(l),n=new p;!(i=h.next()).done;m++)c(n,m,g?s(h,v,[i.value,m],!0):i.value);return n.length=m,n}})},function(t,e,n){var r=n(6);t.exports=function(t,e,n,i){try{return i?e(r(n)[0],n[1]):e(n)}catch(e){var o=t.return;throw void 0!==o&&r(o.call(t)),e}}},function(t,e,n){var r=n(12),i=n(1)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||o[i]===t)}},function(t,e,n){"use strict";var r=n(5),i=n(19);t.exports=function(t,e,n){e in t?r.f(t,e,i(0,n)):t[e]=n}},function(t,e,n){var r=n(69),i=n(1)("iterator"),o=n(12);t.exports=n(7).getIteratorMethod=function(t){if(null!=t)return t[i]||t["@@iterator"]||o[r(t)]}},function(t,e,n){var r=n(23),i=n(1)("toStringTag"),o="Arguments"==r(function(){return arguments}());t.exports=function(t){var e,n,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),i))?n:o?r(e):"Object"==(s=r(e))&&"function"==typeof e.callee?"Arguments":s}},function(t,e,n){var r=n(1)("iterator"),i=!1;try{var o=[7][r]();o.return=function(){i=!0},Array.from(o,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!i)return!1;var n=!1;try{var o=[7],s=o[r]();s.next=function(){return{done:n=!0}},o[r]=function(){return s},t(o)}catch(t){}return n}},function(t,e,n){var r=n(0);r(r.P,"Function",{bind:n(72)})},function(t,e,n){"use strict";var r=n(30),i=n(8),o=n(73),s=[].slice,a={};t.exports=Function.bind||function(t){var e=r(this),n=s.call(arguments,1),u=function(){var r=n.concat(s.call(arguments));return this instanceof u?function(t,e,n){if(!(e in a)){for(var r=[],i=0;i<e;i++)r[i]="a["+i+"]";a[e]=Function("F,a","return new F("+r.join(",")+")")}return a[e](t,n)}(e,r.length,r):o(e,r,t)};return i(e.prototype)&&(u.prototype=e.prototype),u}},function(t,e){t.exports=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},function(t,e,n){n(3)&&"g"!=/./g.flags&&n(5).f(RegExp.prototype,"flags",{configurable:!0,get:n(45)})},function(t,e,n){var r=n(0);r(r.P,"Array",{fill:n(76)}),n(35)("fill")},function(t,e,n){"use strict";var r=n(11),i=n(38),o=n(14);t.exports=function(t){for(var e=r(this),n=o(e.length),s=arguments.length,a=i(s>1?arguments[1]:void 0,n),u=s>2?arguments[2]:void 0,c=void 0===u?n:i(u,n);c>a;)e[a++]=t;return e}},function(t,e,n){"use strict";var r=n(0),i=n(37)(!1),o=[].indexOf,s=!!o&&1/[1].indexOf(1,-0)<0;r(r.P+r.F*(s||!n(15)(o)),"Array",{indexOf:function(t){return s?o.apply(this,arguments)||0:i(this,t,arguments[1])}})},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){!function(){"use strict";var t=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","/"];function e(t){var e,n=new Uint8Array(t);for(e=0;e<t;e+=1)n[e]=0;return n}window.utils={},window.utils.clean=e,window.utils.pad=function(t,e,n){return t=t.toString(n||8),"000000000000".substr(t.length+12-e)+t},window.utils.extend=function(t,n,r,i){var o=e((parseInt((n+r)/i)+1)*i);return o.set(t),o},window.utils.stringToUint8=function(t,n,r){var i,o;for(n=n||e(t.length),r=r||0,i=0,o=t.length;i<o;i+=1)n[r]=t.charCodeAt(i),r+=1;return n},window.utils.uint8ToBase64=function(e){var n,r,i,o,s=e.length%3,a="";for(n=0,i=e.length-s;n<i;n+=3)r=(e[n]<<16)+(e[n+1]<<8)+e[n+2],a+=t[(o=r)>>18&63]+t[o>>12&63]+t[o>>6&63]+t[63&o];switch(a.length%4){case 1:a+="=";break;case 2:a+="=="}return a}}(),function(){"use strict";var t,e=window.utils;t=[{field:"fileName",length:100},{field:"fileMode",length:8},{field:"uid",length:8},{field:"gid",length:8},{field:"fileSize",length:12},{field:"mtime",length:12},{field:"checksum",length:8},{field:"type",length:1},{field:"linkName",length:100},{field:"ustar",length:8},{field:"owner",length:32},{field:"group",length:32},{field:"majorNumber",length:8},{field:"minorNumber",length:8},{field:"filenamePrefix",length:155},{field:"padding",length:12}],window.header={},window.header.structure=t,window.header.format=function(n,r){var i=e.clean(512),o=0;return t.forEach(function(t){var e,r,s=n[t.field]||"";for(e=0,r=s.length;e<r;e+=1)i[o]=s.charCodeAt(e),o+=1;o+=t.length-e}),"function"==typeof r?r(i,o):i}}(),function(){"use strict";var e,n=window.header,r=window.utils,i=512;function o(t){this.written=0,e=(t||20)*i,this.out=r.clean(e),this.blocks=[],this.length=0}o.prototype.append=function(t,e,o,s){var a,u,c,f,h,l,p;if("string"==typeof e)e=r.stringToUint8(e);else if(e.constructor!==Uint8Array.prototype.constructor)throw"Invalid input type. You gave me: "+e.constructor.toString().match(/function\s*([$A-Za-z_][0-9A-Za-z_]*)\s*\(/)[1];"function"==typeof o&&(o,o={}),c=(o=o||{}).mode||4095&parseInt("777",8),f=o.mtime||Math.floor(+new Date/1e3),h=o.uid||0,l=o.gid||0,a={fileName:t,fileMode:r.pad(c,7),uid:r.pad(h,7),gid:r.pad(l,7),fileSize:r.pad(e.length,11),mtime:r.pad(f,11),checksum:"        ",type:"0",ustar:"ustar  ",owner:o.owner||"",group:o.group||""},u=0,Object.keys(a).forEach(function(t){var e,n,r=a[t];for(e=0,n=r.length;e<n;e+=1)u+=r.charCodeAt(e)}),a.checksum=r.pad(u,6)+"\0 ",p=n.format(a);var d=Math.ceil(p.length/i)*i,v=Math.ceil(e.length/i)*i;this.blocks.push({header:p,input:e,headerLength:d,inputLength:v})},o.prototype.save=function(){var t=[],e=[],n=0,r=Math.pow(2,20),o=[];return this.blocks.forEach(function(t){n+t.headerLength+t.inputLength>r&&(e.push({blocks:o,length:n}),o=[],n=0),o.push(t),n+=t.headerLength+t.inputLength}),e.push({blocks:o,length:n}),e.forEach(function(e){var n=new Uint8Array(e.length),r=0;e.blocks.forEach(function(t){n.set(t.header,r),r+=t.headerLength,n.set(t.input,r),r+=t.inputLength}),t.push(n)}),t.push(new Uint8Array(2*i)),new Blob(t,{type:"octet/stream"})},o.prototype.clear=function(){this.written=0,this.out=r.clean(e)},void 0!==t.exports?t.exports=o:window.Tar=o}()},function(t,e,n){void 0!==t.exports&&(t.exports=function(t,e,n){var r,i,o,s=window,a="application/octet-stream",u=n||a,c=t,f=document,h=f.createElement("a"),l=function(t){return String(t)},p=s.Blob||s.MozBlob||s.WebKitBlob||l,d=s.MSBlobBuilder||s.WebKitBlobBuilder||s.BlobBuilder,v=e||"download";if("true"===String(this)&&(u=(c=[c,u])[0],c=c[1]),String(c).match(/^data\:[\w+\-]+\/[\w+\-]+[,;]/))return navigator.msSaveBlob?navigator.msSaveBlob(function(t){for(var e=t.split(/[:;,]/),n=e[1],r=("base64"==e[2]?atob:decodeURIComponent)(e.pop()),i=r.length,o=0,s=new Uint8Array(i);o<i;++o)s[o]=r.charCodeAt(o);return new p([s],{type:n})}(c),v):g(c);try{r=c instanceof p?c:new p([c],{type:u})}catch(t){d&&((i=new d).append([c]),r=i.getBlob(u))}function g(t,e){if("download"in h)return h.href=t,h.setAttribute("download",v),h.innerHTML="downloading...",h.style.display="none",f.body.appendChild(h),setTimeout(function(){h.click(),f.body.removeChild(h),!0===e&&setTimeout(function(){s.URL.revokeObjectURL(h.href)},250)},66),!0;var n=f.createElement("iframe");f.body.appendChild(n),e||(t="data:"+t.replace(/^data:([\w\/\-\+]+)/,a)),n.src=t,setTimeout(function(){f.body.removeChild(n)},333)}if(navigator.msSaveBlob)return navigator.msSaveBlob(r,v);if(s.URL)g(s.URL.createObjectURL(r),!0);else{if("string"==typeof r||r.constructor===l)try{return g("data:"+u+";base64,"+s.btoa(r))}catch(t){return g("data:"+u+","+encodeURIComponent(r))}(o=new FileReader).onload=function(t){g(this.result)},o.readAsDataURL(r)}return!0})},function(t,e,n){var r;t.exports=function t(e,n,i){function o(a,u){if(!n[a]){if(!e[a]){var c="function"==typeof r&&r;if(!u&&c)return r(a,!0);if(s)return s(a,!0);var f=new Error("Cannot find module '"+a+"'");throw f.code="MODULE_NOT_FOUND",f}var h=n[a]={exports:{}};e[a][0].call(h.exports,function(t){var n=e[a][1][t];return o(n||t)},h,h.exports,t,e,n,i)}return n[a].exports}for(var s="function"==typeof r&&r,a=0;a<i.length;a++)o(i[a]);return o}({1:[function(t,e,n){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(t){return"function"==typeof t}function o(t){return"object"==typeof t&&null!==t}function s(t){return void 0===t}e.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},r.prototype.emit=function(t){var e,n,r,a,u,c;if(this._events||(this._events={}),"error"===t&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var f=new Error('Uncaught, unspecified "error" event. ('+e+")");throw f.context=e,f}if(s(n=this._events[t]))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),n.apply(this,a)}else if(o(n))for(a=Array.prototype.slice.call(arguments,1),c=n.slice(),r=c.length,u=0;u<r;u++)c[u].apply(this,a);return!0},r.prototype.addListener=function(t,e){var n;if(!i(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,i(e.listener)?e.listener:e),this._events[t]?o(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,o(this._events[t])&&!this._events[t].warned&&(n=s(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&n>0&&this._events[t].length>n&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(t,e){if(!i(e))throw TypeError("listener must be a function");var n=!1;function r(){this.removeListener(t,r),n||(n=!0,e.apply(this,arguments))}return r.listener=e,this.on(t,r),this},r.prototype.removeListener=function(t,e){var n,r,s,a;if(!i(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(n=this._events[t],s=n.length,r=-1,n===e||i(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(o(n)){for(a=s;a-- >0;)if(n[a]===e||n[a].listener&&n[a].listener===e){r=a;break}if(r<0)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},r.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(i(n=this._events[t]))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},r.prototype.listeners=function(t){return this._events&&this._events[t]?i(this._events[t])?[this._events[t]]:this._events[t].slice():[]},r.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(i(e))return 1;if(e)return e.length}return 0},r.listenerCount=function(t,e){return t.listenerCount(e)}},{}],2:[function(t,e,n){var r=t("./TypedNeuQuant.js"),i=t("./LZWEncoder.js");function o(){this.page=-1,this.pages=[],this.newPage()}o.pageSize=4096,o.charMap={};for(var s=0;s<256;s++)o.charMap[s]=String.fromCharCode(s);function a(t,e){this.width=~~t,this.height=~~e,this.transparent=null,this.transIndex=0,this.repeat=-1,this.delay=0,this.image=null,this.pixels=null,this.indexedPixels=null,this.colorDepth=null,this.colorTab=null,this.neuQuant=null,this.usedEntry=new Array,this.palSize=7,this.dispose=-1,this.firstFrame=!0,this.sample=10,this.dither=!1,this.globalPalette=!1,this.out=new o}o.prototype.newPage=function(){this.pages[++this.page]=new Uint8Array(o.pageSize),this.cursor=0},o.prototype.getData=function(){for(var t="",e=0;e<this.pages.length;e++)for(var n=0;n<o.pageSize;n++)t+=o.charMap[this.pages[e][n]];return t},o.prototype.writeByte=function(t){this.cursor>=o.pageSize&&this.newPage(),this.pages[this.page][this.cursor++]=t},o.prototype.writeUTFBytes=function(t){for(var e=t.length,n=0;n<e;n++)this.writeByte(t.charCodeAt(n))},o.prototype.writeBytes=function(t,e,n){for(var r=n||t.length,i=e||0;i<r;i++)this.writeByte(t[i])},a.prototype.setDelay=function(t){this.delay=Math.round(t/10)},a.prototype.setFrameRate=function(t){this.delay=Math.round(100/t)},a.prototype.setDispose=function(t){t>=0&&(this.dispose=t)},a.prototype.setRepeat=function(t){this.repeat=t},a.prototype.setTransparent=function(t){this.transparent=t},a.prototype.addFrame=function(t){this.image=t,this.colorTab=this.globalPalette&&this.globalPalette.slice?this.globalPalette:null,this.getImagePixels(),this.analyzePixels(),!0===this.globalPalette&&(this.globalPalette=this.colorTab),this.firstFrame&&(this.writeLSD(),this.writePalette(),this.repeat>=0&&this.writeNetscapeExt()),this.writeGraphicCtrlExt(),this.writeImageDesc(),this.firstFrame||this.globalPalette||this.writePalette(),this.writePixels(),this.firstFrame=!1},a.prototype.finish=function(){this.out.writeByte(59)},a.prototype.setQuality=function(t){t<1&&(t=1),this.sample=t},a.prototype.setDither=function(t){!0===t&&(t="FloydSteinberg"),this.dither=t},a.prototype.setGlobalPalette=function(t){this.globalPalette=t},a.prototype.getGlobalPalette=function(){return this.globalPalette&&this.globalPalette.slice&&this.globalPalette.slice(0)||this.globalPalette},a.prototype.writeHeader=function(){this.out.writeUTFBytes("GIF89a")},a.prototype.analyzePixels=function(){this.colorTab||(this.neuQuant=new r(this.pixels,this.sample),this.neuQuant.buildColormap(),this.colorTab=this.neuQuant.getColormap()),this.dither?this.ditherPixels(this.dither.replace("-serpentine",""),null!==this.dither.match(/-serpentine/)):this.indexPixels(),this.pixels=null,this.colorDepth=8,this.palSize=7,null!==this.transparent&&(this.transIndex=this.findClosest(this.transparent,!0))},a.prototype.indexPixels=function(t){var e=this.pixels.length/3;this.indexedPixels=new Uint8Array(e);for(var n=0,r=0;r<e;r++){var i=this.findClosestRGB(255&this.pixels[n++],255&this.pixels[n++],255&this.pixels[n++]);this.usedEntry[i]=!0,this.indexedPixels[r]=i}},a.prototype.ditherPixels=function(t,e){var n={FalseFloydSteinberg:[[3/8,1,0],[3/8,0,1],[.25,1,1]],FloydSteinberg:[[7/16,1,0],[3/16,-1,1],[5/16,0,1],[1/16,1,1]],Stucki:[[8/42,1,0],[4/42,2,0],[2/42,-2,1],[4/42,-1,1],[8/42,0,1],[4/42,1,1],[2/42,2,1],[1/42,-2,2],[2/42,-1,2],[4/42,0,2],[2/42,1,2],[1/42,2,2]],Atkinson:[[1/8,1,0],[1/8,2,0],[1/8,-1,1],[1/8,0,1],[1/8,1,1],[1/8,0,2]]};if(!t||!n[t])throw"Unknown dithering kernel: "+t;var r=n[t],i=0,o=this.height,s=this.width,a=this.pixels,u=e?-1:1;this.indexedPixels=new Uint8Array(this.pixels.length/3);for(var c=0;c<o;c++){e&&(u*=-1);for(var f=1==u?0:s-1,h=1==u?s:0;f!==h;f+=u){var l=3*(i=c*s+f),p=a[l],d=a[l+1],v=a[l+2];l=this.findClosestRGB(p,d,v),this.usedEntry[l]=!0,this.indexedPixels[i]=l,l*=3;for(var g=this.colorTab[l],m=this.colorTab[l+1],y=this.colorTab[l+2],w=p-g,b=d-m,x=v-y,S=1==u?0:r.length-1,T=1==u?r.length:0;S!==T;S+=u){var P=r[S][1],F=r[S][2];if(P+f>=0&&P+f<s&&F+c>=0&&F+c<o){var _=r[S][0];l=i+P+F*s,a[l*=3]=Math.max(0,Math.min(255,a[l]+w*_)),a[l+1]=Math.max(0,Math.min(255,a[l+1]+b*_)),a[l+2]=Math.max(0,Math.min(255,a[l+2]+x*_))}}}}},a.prototype.findClosest=function(t,e){return this.findClosestRGB((16711680&t)>>16,(65280&t)>>8,255&t,e)},a.prototype.findClosestRGB=function(t,e,n,r){if(null===this.colorTab)return-1;if(this.neuQuant&&!r)return this.neuQuant.lookupRGB(t,e,n);for(var i=0,o=16777216,s=this.colorTab.length,a=0,u=0;a<s;u++){var c=t-(255&this.colorTab[a++]),f=e-(255&this.colorTab[a++]),h=n-(255&this.colorTab[a++]),l=c*c+f*f+h*h;(!r||this.usedEntry[u])&&l<o&&(o=l,i=u)}return i},a.prototype.getImagePixels=function(){var t=this.width,e=this.height;this.pixels=new Uint8Array(t*e*3);for(var n=this.image,r=0,i=0,o=0;o<e;o++)for(var s=0;s<t;s++)this.pixels[i++]=n[r++],this.pixels[i++]=n[r++],this.pixels[i++]=n[r++],r++},a.prototype.writeGraphicCtrlExt=function(){var t,e;this.out.writeByte(33),this.out.writeByte(249),this.out.writeByte(4),null===this.transparent?(t=0,e=0):(t=1,e=2),this.dispose>=0&&(e=7&this.dispose),e<<=2,this.out.writeByte(0|e|t),this.writeShort(this.delay),this.out.writeByte(this.transIndex),this.out.writeByte(0)},a.prototype.writeImageDesc=function(){this.out.writeByte(44),this.writeShort(0),this.writeShort(0),this.writeShort(this.width),this.writeShort(this.height),this.firstFrame||this.globalPalette?this.out.writeByte(0):this.out.writeByte(128|this.palSize)},a.prototype.writeLSD=function(){this.writeShort(this.width),this.writeShort(this.height),this.out.writeByte(240|this.palSize),this.out.writeByte(0),this.out.writeByte(0)},a.prototype.writeNetscapeExt=function(){this.out.writeByte(33),this.out.writeByte(255),this.out.writeByte(11),this.out.writeUTFBytes("NETSCAPE2.0"),this.out.writeByte(3),this.out.writeByte(1),this.writeShort(this.repeat),this.out.writeByte(0)},a.prototype.writePalette=function(){this.out.writeBytes(this.colorTab);for(var t=768-this.colorTab.length,e=0;e<t;e++)this.out.writeByte(0)},a.prototype.writeShort=function(t){this.out.writeByte(255&t),this.out.writeByte(t>>8&255)},a.prototype.writePixels=function(){var t=new i(this.width,this.height,this.indexedPixels,this.colorDepth);t.encode(this.out)},a.prototype.stream=function(){return this.out},e.exports=a},{"./LZWEncoder.js":3,"./TypedNeuQuant.js":4}],3:[function(t,e,n){var r=-1,i=12,o=5003,s=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535];e.exports=function(t,e,n,a){var u,c,f,h,l,p,d=Math.max(2,a),v=new Uint8Array(256),g=new Int32Array(o),m=new Int32Array(o),y=0,w=0,b=!1;function x(t,e){v[c++]=t,c>=254&&P(e)}function S(t){T(o),w=l+2,b=!0,k(l,t)}function T(t){for(var e=0;e<t;++e)g[e]=-1}function P(t){c>0&&(t.writeByte(c),t.writeBytes(v,0,c),c=0)}function F(t){return(1<<t)-1}function _(){if(0===remaining)return r;--remaining;var t=n[curPixel++];return 255&t}function k(t,e){for(u&=s[y],y>0?u|=t<<y:u=t,y+=n_bits;y>=8;)x(255&u,e),u>>=8,y-=8;if((w>f||b)&&(b?(f=F(n_bits=h),b=!1):(++n_bits,f=n_bits==i?1<<i:F(n_bits))),t==p){for(;y>0;)x(255&u,e),u>>=8,y-=8;P(e)}}this.encode=function(n){n.writeByte(d),remaining=t*e,curPixel=0,function(t,e){var n,s,a,u,d,v,y;for(h=t,b=!1,n_bits=h,f=F(n_bits),p=1+(l=1<<t-1),w=l+2,c=0,u=_(),y=0,n=o;n<65536;n*=2)++y;y=8-y,T(v=o),k(l,e);t:for(;(s=_())!=r;)if(n=(s<<i)+u,g[a=s<<y^u]!==n){if(g[a]>=0){d=v-a,0===a&&(d=1);do{if((a-=d)<0&&(a+=v),g[a]===n){u=m[a];continue t}}while(g[a]>=0)}k(u,e),u=s,w<1<<i?(m[a]=w++,g[a]=n):S(e)}else u=m[a];k(u,e),k(p,e)}(d+1,n),n.writeByte(0)}}},{}],4:[function(t,e,n){var r=100,i=256,o=i-1,s=4,a=16,u=1<<a,c=10,f=10,h=u>>f,l=u<<c-f,p=i>>3,d=6,v=1<<d,g=p*v,m=30,y=1024,w=256,b=1<<18,x=499,S=491,T=487,P=503,F=3*P;e.exports=function(t,e){var n,p,v,_,k;function O(t,e,r,i,o){n[e][0]-=t*(n[e][0]-r)/y,n[e][1]-=t*(n[e][1]-i)/y,n[e][2]-=t*(n[e][2]-o)/y}function A(t,e,r,o,s){for(var a,u,c=Math.abs(e-t),f=Math.min(e+t,i),h=e+1,l=e-1,p=1;h<f||l>c;)u=k[p++],h<f&&((a=n[h++])[0]-=u*(a[0]-r)/b,a[1]-=u*(a[1]-o)/b,a[2]-=u*(a[2]-s)/b),l>c&&((a=n[l--])[0]-=u*(a[0]-r)/b,a[1]-=u*(a[1]-o)/b,a[2]-=u*(a[2]-s)/b)}function L(t,e,r){var o,u,p,d,g,m=~(1<<31),y=m,w=-1,b=w;for(o=0;o<i;o++)u=n[o],(p=Math.abs(u[0]-t)+Math.abs(u[1]-e)+Math.abs(u[2]-r))<m&&(m=p,w=o),(d=p-(v[o]>>a-s))<y&&(y=d,b=o),g=_[o]>>f,_[o]-=g,v[o]+=g<<c;return _[w]+=h,v[w]-=l,b}this.buildColormap=function(){(function(){var t,e;for(n=[],p=new Int32Array(256),v=new Int32Array(i),_=new Int32Array(i),k=new Int32Array(i>>3),t=0;t<i;t++)e=(t<<s+8)/i,n[t]=new Float64Array([e,e,e,0]),_[t]=u/i,v[t]=0})(),function(){var n,i,o,a,u,c,f=t.length,h=30+(e-1)/3,l=f/(3*e),p=~~(l/r),v=y,b=g,_=b>>d;for(_<=1&&(_=0),n=0;n<_;n++)k[n]=v*((_*_-n*n)*w/(_*_));f<F?(e=1,i=3):i=f%x!=0?3*x:f%S!=0?3*S:f%T!=0?3*T:3*P;var M=0;for(n=0;n<l;)if(o=(255&t[M])<<s,a=(255&t[M+1])<<s,u=(255&t[M+2])<<s,c=L(o,a,u),O(v,c,o,a,u),0!==_&&A(_,c,o,a,u),(M+=i)>=f&&(M-=f),0===p&&(p=1),++n%p==0)for(v-=v/h,(_=(b-=b/m)>>d)<=1&&(_=0),c=0;c<_;c++)k[c]=v*((_*_-c*c)*w/(_*_))}(),function(){for(var t=0;t<i;t++)n[t][0]>>=s,n[t][1]>>=s,n[t][2]>>=s,n[t][3]=t}(),function(){var t,e,r,s,a,u,c=0,f=0;for(t=0;t<i;t++){for(r=n[t],a=t,u=r[1],e=t+1;e<i;e++)(s=n[e])[1]<u&&(a=e,u=s[1]);if(s=n[a],t!=a&&(e=s[0],s[0]=r[0],r[0]=e,e=s[1],s[1]=r[1],r[1]=e,e=s[2],s[2]=r[2],r[2]=e,e=s[3],s[3]=r[3],r[3]=e),u!=c){for(p[c]=f+t>>1,e=c+1;e<u;e++)p[e]=t;c=u,f=t}}for(p[c]=f+o>>1,e=c+1;e<256;e++)p[e]=o}()},this.getColormap=function(){for(var t=[],e=[],r=0;r<i;r++)e[n[r][3]]=r;for(var o=0,s=0;s<i;s++){var a=e[s];t[o++]=n[a][0],t[o++]=n[a][1],t[o++]=n[a][2]}return t},this.lookupRGB=function(t,e,r){for(var o,s,a,u=1e3,c=-1,f=p[e],h=f-1;f<i||h>=0;)f<i&&(s=n[f],(a=s[1]-e)>=u?f=i:(f++,a<0&&(a=-a),(o=s[0]-t)<0&&(o=-o),(a+=o)<u&&((o=s[2]-r)<0&&(o=-o),(a+=o)<u&&(u=a,c=s[3])))),h>=0&&(s=n[h],(a=e-s[1])>=u?h=-1:(h--,a<0&&(a=-a),(o=s[0]-t)<0&&(o=-o),(a+=o)<u&&((o=s[2]-r)<0&&(o=-o),(a+=o)<u&&(u=a,c=s[3]))));return c}}},{}],5:[function(t,e,n){var r,i,o,s,a;a=navigator.userAgent.toLowerCase(),s=navigator.platform.toLowerCase(),r=a.match(/(opera|ie|firefox|chrome|version)[\s\/:]([\w\d\.]+)?.*?(safari|version[\s\/:]([\w\d\.]+)|$)/)||[null,"unknown",0],o="ie"===r[1]&&document.documentMode,(i={name:"version"===r[1]?r[3]:r[1],version:o||parseFloat("opera"===r[1]&&r[4]?r[4]:r[2]),platform:{name:a.match(/ip(?:ad|od|hone)/)?"ios":(a.match(/(?:webos|android)/)||s.match(/mac|win|linux/)||["other"])[0]}})[i.name]=!0,i[i.name+parseInt(i.version,10)]=!0,i.platform[i.platform.name]=!0,e.exports=i},{}],6:[function(t,e,n){var r,i,o={}.hasOwnProperty,s=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1},a=[].slice;r=t("events").EventEmitter,i=t("./browser.coffee"),t("./GIFEncoder.js"),t("./gif.worker.coffee"),e.exports=function(t){var e,n;function r(t){var n,r,i;for(r in this.running=!1,this.options={},this.frames=[],this.freeWorkers=[],this.activeWorkers=[],this.setOptions(t),e)i=e[r],null==(n=this.options)[r]&&(n[r]=i)}return function(t,e){for(var n in e)o.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(r,t),e={workerScript:"gif.worker.js",workers:2,repeat:0,background:"#fff",quality:10,width:null,height:null,transparent:null,debug:!1,dither:!1},n={delay:500,copy:!1,dispose:-1},r.prototype.setOption=function(t,e){if(this.options[t]=e,null!=this._canvas&&("width"===t||"height"===t))return this._canvas[t]=e},r.prototype.setOptions=function(t){var e,n,r;for(e in n=[],t)o.call(t,e)&&(r=t[e],n.push(this.setOption(e,r)));return n},r.prototype.addFrame=function(t,e){var r,i;for(i in null==e&&(e={}),(r={}).transparent=this.options.transparent,n)r[i]=e[i]||n[i];if(null==this.options.width&&this.setOption("width",t.width),null==this.options.height&&this.setOption("height",t.height),"undefined"!=typeof ImageData&&null!==ImageData&&t instanceof ImageData)r.data=t.data;else if("undefined"!=typeof CanvasRenderingContext2D&&null!==CanvasRenderingContext2D&&t instanceof CanvasRenderingContext2D||"undefined"!=typeof WebGLRenderingContext&&null!==WebGLRenderingContext&&t instanceof WebGLRenderingContext)e.copy?r.data=this.getContextData(t):r.context=t;else{if(null==t.childNodes)throw new Error("Invalid image");e.copy?r.data=this.getImageData(t):r.image=t}return this.frames.push(r)},r.prototype.render=function(){var t,e,n;if(this.running)throw new Error("Already running");if(null==this.options.width||null==this.options.height)throw new Error("Width and height must be set prior to rendering");if(this.running=!0,this.nextFrame=0,this.finishedFrames=0,this.imageParts=function(){var t,e,n;for(n=[],t=0,e=this.frames.length;0<=e?t<e:t>e;0<=e?++t:--t)n.push(null);return n}.call(this),e=this.spawnWorkers(),!0===this.options.globalPalette)this.renderNextFrame();else for(t=0,n=e;0<=n?t<n:t>n;0<=n?++t:--t)this.renderNextFrame();return this.emit("start"),this.emit("progress",0)},r.prototype.abort=function(){for(var t;null!=(t=this.activeWorkers.shift());)this.log("killing active worker"),t.terminate();return this.running=!1,this.emit("abort")},r.prototype.spawnWorkers=function(){var t,e,n,r;return t=Math.min(this.options.workers,this.frames.length),function(){n=[];for(var r=e=this.freeWorkers.length;e<=t?r<t:r>t;e<=t?r++:r--)n.push(r);return n}.apply(this).forEach((r=this,function(t){var e;return r.log("spawning worker "+t),(e=new Worker(r.options.workerScript)).onmessage=function(t){return r.activeWorkers.splice(r.activeWorkers.indexOf(e),1),r.freeWorkers.push(e),r.frameFinished(t.data)},r.freeWorkers.push(e)})),t},r.prototype.frameFinished=function(t){var e,n;if(this.log("frame "+t.index+" finished - "+this.activeWorkers.length+" active"),this.finishedFrames++,this.emit("progress",this.finishedFrames/this.frames.length),this.imageParts[t.index]=t,!0===this.options.globalPalette&&(this.options.globalPalette=t.globalPalette,this.log("global palette analyzed"),this.frames.length>2))for(e=1,n=this.freeWorkers.length;1<=n?e<n:e>n;1<=n?++e:--e)this.renderNextFrame();return s.call(this.imageParts,null)>=0?this.renderNextFrame():this.finishRendering()},r.prototype.finishRendering=function(){var t,e,n,r,i,o,s,a,u,c,f,h,l,p,d,v;for(a=0,p=this.imageParts,i=0,u=p.length;i<u;i++)e=p[i],a+=(e.data.length-1)*e.pageSize+e.cursor;for(a+=e.pageSize-e.cursor,this.log("rendering finished - filesize "+Math.round(a/1e3)+"kb"),t=new Uint8Array(a),h=0,d=this.imageParts,o=0,c=d.length;o<c;o++)for(e=d[o],v=e.data,n=s=0,f=v.length;s<f;n=++s)l=v[n],t.set(l,h),n===e.data.length-1?h+=e.cursor:h+=e.pageSize;return r=new Blob([t],{type:"image/gif"}),this.emit("finished",r,t)},r.prototype.renderNextFrame=function(){var t,e,n;if(0===this.freeWorkers.length)throw new Error("No free workers");if(!(this.nextFrame>=this.frames.length))return t=this.frames[this.nextFrame++],n=this.freeWorkers.shift(),e=this.getTask(t),this.log("starting frame "+(e.index+1)+" of "+this.frames.length),this.activeWorkers.push(n),n.postMessage(e)},r.prototype.getContextData=function(t){return t.getImageData(0,0,this.options.width,this.options.height).data},r.prototype.getImageData=function(t){var e;return null==this._canvas&&(this._canvas=document.createElement("canvas"),this._canvas.width=this.options.width,this._canvas.height=this.options.height),(e=this._canvas.getContext("2d")).setFill=this.options.background,e.fillRect(0,0,this.options.width,this.options.height),e.drawImage(t,0,0),this.getContextData(e)},r.prototype.getTask=function(t){var e,n;if(e=this.frames.indexOf(t),n={index:e,last:e===this.frames.length-1,delay:t.delay,dispose:t.dispose,transparent:t.transparent,width:this.options.width,height:this.options.height,quality:this.options.quality,dither:this.options.dither,globalPalette:this.options.globalPalette,repeat:this.options.repeat,canTransfer:"chrome"===i.name},null!=t.data)n.data=t.data;else if(null!=t.context)n.data=this.getContextData(t.context);else{if(null==t.image)throw new Error("Invalid frame");n.data=this.getImageData(t.image)}return n},r.prototype.log=function(){var t;if(t=1<=arguments.length?a.call(arguments,0):[],this.options.debug)return console.log.apply(console,t)},r}(r)},{"./GIFEncoder.js":2,"./browser.coffee":5,"./gif.worker.coffee":7,events:1}],7:[function(t,e,n){var r,i;r=t("./GIFEncoder.js"),i=function(t){var e,n,i,o;return e=new r(t.width,t.height),0===t.index?e.writeHeader():e.firstFrame=!1,e.setTransparent(t.transparent),e.setDispose(t.dispose),e.setRepeat(t.repeat),e.setDelay(t.delay),e.setQuality(t.quality),e.setDither(t.dither),e.setGlobalPalette(t.globalPalette),e.addFrame(t.data),t.last&&e.finish(),!0===t.globalPalette&&(t.globalPalette=e.getGlobalPalette()),i=e.stream(),t.data=i.pages,t.cursor=i.cursor,t.pageSize=i.constructor.pageSize,t.canTransfer?(o=function(){var e,r,i,o;for(i=t.data,o=[],e=0,r=i.length;e<r;e++)n=i[e],o.push(n.buffer);return o}(),self.postMessage(t,o)):self.postMessage(t)},self.onmessage=function(t){return i(t.data)}},{"./GIFEncoder.js":2}]},{},[6])(6)},function(t,e,n){"use strict";n.r(e);n(18),n(34),n(16),n(17),n(41),n(42),n(43),n(62),n(64);var r=function(t){return Array.from(Array(t).keys())},i=(n(71),n(44),n(46),n(47)),o=n.n(i),s=arguments,a=function(){var t,e=0,n=0,r=0,i=1,o=(t=4022871197,function(e){e=e.toString();for(var n=0;n<e.length;n++){var r=.02519603282416938*(t+=e.charCodeAt(n));r-=t=r>>>0,t=(r*=t)>>>0,t+=4294967296*(r-=t)}return 2.3283064365386963e-10*(t>>>0)});e=o(" "),n=o(" "),r=o(" ");for(var a=0;a<s.length;a++)(e-=o(s[a]))<0&&(e+=1),(n-=o(s[a]))<0&&(n+=1),(r-=o(s[a]))<0&&(r+=1);return o=null,function(){var t=2091639*e+2.3283064365386963e-10*i;return e=n,n=r,r=t-(i=0|t)}};var u,c,f=a(),h=Math.round,l=new o.a(f),p=l.noise2D.bind(l),d=function(t,e,n){var r=v(t,e,n);return r*r*(3-2*r)},v=function(t,e,n){return t<e?e:t>n?n:t},g=function(t,e,n){return t+(e-t)*n},m=function(t,e,n){return function(t,e,n){return r(n+1).map(function(r){return t+r/n*(e-t)})}(t.x,e.x,n).map(function(e){return{x:e,y:t.y}})},y=function(t){var e=t.path,n=t.startT,r=t.endT,i=t.rampSize,o=t.magnitude,s=t.scale,a=t.t;return e.map(function(t,u){var c=u/e.length,f=function(t){var e=t.t,n=t.rampUp,r=t.rampDown,i=t.rampSize;return e<n||e>=r+i?0:e<n+i?d((e-n)/i,0,1):e<r?1:1-d((e-r)/i,0,1)}({t:c,rampUp:n,rampDown:r,rampSize:i}),h=p(c*s,t.y+a);return{x:t.x,y:t.y+h*o*f}})},w=(n(75),u="#666",c="#ccc",function(t,e){return function(n){var r=n.t;return function(t,e,n){return{r:g(t.r,e.r,n),g:g(t.g,e.g,n),b:g(t.b,e.b,n)}}(P(t),P(e),r)}}),b=(w("#222","#aaa"),function(t,e){return"".concat((n=e-t.length,Array(n).fill("0").join(""))).concat(t);var n}),x=function(t){return b(h(v(t,0,255)).toString(16),2)},S=function(t){return"string"==typeof t?t:"#".concat(x(t.r)).concat(x(t.g)).concat(x(t.b))},T=function(t){return 1===t.length?t+t:t},P=function(t){if("string"!=typeof t)return t;var e=/^\s*#([0-9a-fA-F][0-9a-fA-F]?)([0-9a-fA-F][0-9a-fA-F]?)([0-9a-fA-F][0-9a-fA-F]?)\s*$/.exec(t);if(!e)throw new Error("Could not parse colour string");return{r:parseInt(T(e[1]),16),g:parseInt(T(e[2]),16),b:parseInt(T(e[3]),16)}},F=function(t){var e=t.parentId,n=t.renderFn,i=t.width,o=t.height,s=t.t,a=Math.ceil(o/30),u=h(i/12),c=w({r:5,g:54,b:134},{r:130,g:210,b:245}),f=function(t,e,n,r){return t.map(function(t){return m({x:0,y:t*e},{x:n,y:t*e},r)})}(r(30),a,i,u);return n({curves:function(t){var e=t.paths,n=t.startY,r=t.endY;return e.map(function(t,i){var o=i/e.length;return o>=n&&o<r?t:[t[0],t[t.length-1]]})}({paths:f.map(function(t,e){var n=e/f.length;return n>=.3&&n<.6?y({path:t,startT:.3,endT:.6,rampSize:.1,magnitude:50,scale:5,t:s/5e3}):t}),startY:.3,endY:.6}),thickness:a,bgColour:{r:160,g:100,b:180},colourFn:c,width:i,height:o,parentId:e})},_=(n(77),n(48)),k=n.n(_);function O(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function A(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}var L=function(t){var e=t.run,n=t.renderFn,r=t.duration,i=t.fps,o=A(t,["run","renderFn","duration","fps"]),s=new k.a({framerate:i,format:"png",timeLimit:r}),a=0,u=!0;s.start(),e(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){O(t,e,n[e])})}return t}({renderFn:function(t){var e=n(t);a<r*i?s.capture(e):u&&(u=!1,s.save(),s.stop()),a+=1}},o))};function M(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var E={renderFn:function(t){var e=t.curves,n=t.thickness,r=t.bgColour,i=t.colourFn,o=t.width,s=t.height,a=t.debug,u=t.parentId,c=document.getElementById(u),f=c.firstChild;f&&f.width===o&&f.height===s||(f&&f.remove(),f=function(t,e,n){var r=document.createElement("canvas");return r.width=t,r.height=e,n.appendChild(r),r}(o,s,c));var h=f.getContext("2d");return h.save(),h.translate(0,n/2),h.fillStyle=S(r),h.fillRect(0,0,o,s),h.lineWidth=n,e.forEach(function(t,n){var r=n/e.length;h.beginPath(),h.strokeStyle=S(i({idx:n,t:r})),h.moveTo(t[0].x,t[0].y),t.forEach(function(t){return h.lineTo(t.x,t.y)}),h.stroke()}),a&&(h.fillStyle="#0f0",e.forEach(function(t){return t.forEach(function(t){return h.fillRect(t.x-4,t.y-4,4,4)})})),h.restore(),f},parentId:"gerhardt",fps:30},j={width:800,height:800};window.addEventListener("error",function(t){alert("".concat(t.filename," ").concat(t.lineno,":").concat(t.colno,": ").concat(t.message))});var C=function(){return{width:document.documentElement.clientWidth,height:document.documentElement.clientHeight}},B=function(){return!0},D=function(t){var e=t.parentId,n=t.renderFn,r=t.dimsFn,i=void 0===r?C:r,o=t.fps,s=void 0===o?0:o,a=s?function(t){var e=0,n=1/t*1e3;return function(t){return!(t-e<n||(e=t,0))}}(s):B;!function t(r){if(requestAnimationFrame(t),a(r)){var o=i(),s=o.width,u=o.height;F({parentId:e,renderFn:n,width:s,height:u,t:r})}}()};document.addEventListener("DOMContentLoaded",function(){var t;L(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){M(t,e,n[e])})}return t}({},E,{run:D,duration:5,dimsFn:(t=j,function(){return t})}))}),window.addEventListener("error",function(t){alert("".concat(t.filename," ").concat(t.lineno,":").concat(t.colno,": ").concat(t.message))})}]);
//# sourceMappingURL=bundle.js.map